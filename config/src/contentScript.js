(()=>{"use strict";let e=!1,t=!1,o=null;function n(){document.querySelectorAll("article").forEach((o=>{!async function(o){if("true"!==o.dataset.processed){if(o.dataset.processed="true",e&&o.querySelector("video"))return console.log("[X Filter] Hiding post with video"),void(o.style.display="none");if(t){const e=o.textContent;if(e.length<10)return;console.log("[X Filter] Analyzing post for political content"),await async function(e){try{const t=await new Promise((e=>{chrome.storage.local.get(["openaiKey"],(function(t){e(t.openaiKey)}))}));if(!t)return console.log("[X Filter] No API key found"),!1;const o=`Analyze if the following content is political in nature. Respond with only "true" or "false":\n    "${e}"`,n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"user",content:o}],temperature:.7})});return"true"===(await n.json()).choices[0].message.content.toLowerCase().trim()}catch(e){return console.error("[X Filter] Error analyzing content:",e),!1}}(e)&&(console.log("[X Filter] Hiding political post"),o.style.display="none")}}}(o)}))}function i(){o||(o=new MutationObserver((e=>{for(const t of e)t.addedNodes.length&&n()})),o.observe(document.body,{childList:!0,subtree:!0}),console.log("[X Filter] Observer started"))}function r(){o&&(o.disconnect(),o=null,console.log("[X Filter] Observer stopped"))}chrome.runtime.onMessage.addListener(((o,l,s)=>("getState"===o.action?s({videoActive:e,politicalActive:t}):"toggleVideoRemoval"===o.action?(e=!e,e&&n(),e||t?i():r(),s({success:!0,active:e})):"togglePoliticalFilter"===o.action&&(t=!t,t&&n(),e||t?i():r(),s({success:!0,active:t})),!0))),console.log("[X Content Filter] Content script loaded")})();
//# sourceMappingURL=contentScript.js.map